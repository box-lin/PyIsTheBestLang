class Solution:
    def validSubarraySize(self, nums: List[int], threshold: int) -> int:
        # 本质是寻找以当前值num为最小值的最长连续子序列是否满足要求
        n = len(nums)

        # 右边的边界
        post = [0]*n
        lst = []
        for i in range(n):
            while lst and nums[lst[-1]] > nums[i]:
                post[lst.pop(-1)] = i-1
            lst.append(i)
        for va in lst:
            post[va] = n-1

        # 左边的边界
        pre = [0]*n
        lst = []
        for i in range(n-1, -1, -1):
            while lst and nums[lst[-1]] > nums[i]:
                pre[lst.pop(-1)] = i+1
            lst.append(i)
        for va in lst:
            pre[va] = 0

        # 遍历寻找符合条件的长度
        for i in range(n):
            if nums[i] > threshold/(post[i]-pre[i]+1):
                return post[i]-pre[i]+1
        return -1