
## 前缀和

## 二维前缀和

## 差分

```Python3

class Solution:
    def shiftingLetters(self, s: str, shifts: List[List[int]]) -> str:
        n = len(s)
        diff = [0]*n
        for i, j, d in shifts:
            if d == 1:
                if j+1 < n:
                    diff[j+1] -= 1
                diff[i] += 1
            else:
                if j+1<n:
                    diff[j+1] += 1
                diff[i] -= 1

        lst = [diff[0]]
        for d in diff[1:]:
            lst.append(lst[-1]+d)

        ans = []
        for w in s:
            ans.append(ord(w)-ord('a'))
        for i in range(n):
            ans[i] = (ans[i] + lst[i])%26

        word = "abcdefghijklmnopqrstuvwxyz"
        ans = [word[i] for i in ans]
        return "".join(ans)
```

## 二维差分
P3397 地毯: https://www.luogu.com.cn/problem/P3397#submit
```python3
n, m = [int(w) for w in input().strip().split() if w]

# 索引从1开始，矩阵初始值为0，n*n大小
diff = [[0]*(n+2) for _ in range(n+2)]
for _ in range(m):
    xa, ya, xb, yb = [int(w) for w in input().strip().split() if w]
    diff[xa][ya] += 1
    diff[xa][yb+1] -= 1
    diff[xb+1][ya] -= 1
    diff[xb+1][yb+1] += 1

for i in range(1, n+2):
    for j in range(1, n+2):
        diff[i][j] += diff[i-1][j]+diff[i][j-1]-diff[i-1][j-1]

for i in range(1, n+1):
    print(" ".join(str(x) for x in diff[i][1:n+1]))

```

## 树上差分

## 点差分

## 边差分