
---

<font size=8>**[题目名称]**</font>

[题目名称]: https://leetcode.cn/contest/weekly-contest-335/problems/distinct-prime-factors-of-product-of-array/


<font size=6>**题意描述**</font>



<font size=6>**解题思路**</font>

跟第324场周赛T2一样的思路，质因数分解模拟计数即可，奉上质因数分解板子！

<font size=6>**算法标签**</font>
- 质因数分解
- 模拟

<font size=6>**代码**</font>

```python3
@lru_cache(None)
def get_prime_factor(num):
    # 质因数分解
    res = []
    for i in range(2, int(math.sqrt(num)) + 1):
        cnt = 0
        while num % i == 0:
            num //= i
            cnt += 1
        if cnt:
            res.append([i, cnt])
        if i > num:
            break
    if num != 1 or not res:
        res.append([num, 1])
    # 从小到大返回质因数分解以及对应的幂次，注意 1 返回 []
    return res


class Solution:
    def distinctPrimeFactors(self, nums: List[int]) -> int:
        ans = set()
        for num in nums:
            for x in get_prime_factor(num):
                if x[0] > 1:
                    ans.add(x[0])
        return len(ans)
```

<font size=6>**复杂度**</font>

设数组长度为$n$，最大数字为$m$，通过预处理计算质因数分解则有
- 时间复杂度$O(n+mlogm)$
- 空间复杂度$O(n)$

---