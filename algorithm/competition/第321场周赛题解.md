# [【儿须成名酒须醉】第321场力扣周赛题解]
***

### 写在前面
前3题3分钟，最后1题30分钟...无能狂怒


[【儿须成名酒须醉】第321场力扣周赛题解]: https://leetcode.cn/contest/weekly-contest-321/
***    
## [题目一: 找出中枢整数]
[题目一: 找出中枢整数]: https://leetcode.cn/contest/weekly-contest-321/problems/find-the-pivot-integer/

### 解题思路
利用等差数列求和可知
$$\frac{x(x+1)}{2}=\frac{n(n+1)}{2}-\frac{x(x-1)}{2}$$
化简可得
$$2x^2=n^2+n$$
因此判断$x$是否有整数解即可
- 数学
### 代码
```python3
class Solution:
    def pivotInteger(self, n: int) -> int:
        x = math.sqrt(n * (n + 1) / 2)
        return int(x) if int(x) == x else -1
```
### 复杂度分析
- 时间复杂度$O(logn)$
- 空间复杂度$O(1)$

***
## [题目二：追加字符以获得子序列]

[题目二：追加字符以获得子序列]: https://leetcode.cn/contest/weekly-contest-321/problems/append-characters-to-string-to-make-subsequence/
### 解题思路
遍历字符串$s$，使用指针贪心匹配$t$当中的字符，最后需要追加的字符数即为$t$还未匹配的字符数
- 指针
- 贪心
### 代码
```python3
class Solution:
    def appendCharacters(self, s: str, t: str) -> int:
        n = len(t)
        i = 0
        for w in s:
            if t[i] == w:
                i += 1
                if i == n:
                    return 0
        return n - i
```
### 复杂度分析
设字符串长度为$n$，则有
- 时间复杂度$O(n)$
- 空间复杂度$O(1)$


***
## [题目三：从链表中移除节点]

[题目三：从链表中移除节点]: https://leetcode.cn/contest/weekly-contest-321/problems/remove-nodes-from-linked-list/
### 解题思路
遍历链表，使用单调栈记录剩余的取值序列，模拟生成即可
- 单调栈
- 模拟

### 代码
```python3
class Solution:
    def removeNodes(self, head: Optional[ListNode]) -> Optional[ListNode]:
        stack = []
        while head:
            while stack and stack[-1] < head.val:
                stack.pop()
            stack.append(head.val)
            head = head.next
        ans = ListNode(-1)
        pre = ans 
        for num in stack:
            pre.next = ListNode(num)
            pre = pre.next
        return ans.next
```
### 复杂度分析
设节点个数为$n$
- 时间复杂度$O(n)$
- 空间复杂度$O(n)$

***
## [题目四：统计中位数为 K 的子数组]

[题目四：统计中位数为 K 的子数组]: https://leetcode.cn/contest/weekly-contest-321/problems/count-subarrays-with-median-k/
### 解题思路
跟昨晚双周赛$T4$的套路很像，注意中位数在奇数与偶数长度下的差异，同时要求是非空的连续子数组
- 前缀和
- 哈希
- 计数
- 枚举
设$k$的索引为$x$，最终会取到$x$左边的部分连续元素与右边的部分连续元素，使用前缀和哈希计数的思想，枚举左右两边扩展
的大于$k$与小于$k$的数字个数，设左边分别为$a_{1}$和$b_{1}$，右边为$a_{2}$和$b_{2}$
- 考虑连续子数组为奇数长度，则有$a_{1}+a_{2}=b_{1}+b_{2}$，即$a_{1}-b_{1}=-(a_{2}-b_{2})$
- 考虑连续子数组为偶数长度，则有$a_{1}+a_{2}=b_{1}+b_{2}+1$，即$a_{1}-b_{1}=-(a_{2}-b_{2})+1$
由此遍历左右两边的连续子数组，进行$a_{i}-b_{i}$的哈希计数，最后相乘计数加和即可

### 代码
```python3
class Solution:
    def countSubarrays(self, nums: List[int], k: int) -> int:
        n = len(nums)
        x = nums.index(k)

        # 前缀连续计数
        pre = defaultdict(int)
        pre[0] = 1
        a = b = 0
        for i in range(x - 1, -1, -1):
            if nums[i] > k:
                a += 1
            else:
                b += 1
            pre[a - b] += 1

        # 后缀连续计数
        post = defaultdict(int)
        post[0] = 1
        a = b = 0
        for i in range(x + 1, n):
            if nums[i] > k:
                a += 1
            else:
                b += 1
            post[a - b] += 1

        # 组合计数
        ans = 0
        for diff in pre:
            ans += pre[diff] * (post[-diff] + post[-diff + 1])
        return ans
```


### 复杂度分析n
设数组长度为$n$，则有
- 时间复杂度$O(n)$
- 空间复杂度$O(n)$
***

### 写在最后
谢谢阅读，继续努力！